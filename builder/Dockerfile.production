FROM node:16.4-alpine

ARG GENERATE_SOURCEMAP=false
ARG NODE_ENV=${NODE_ENV}
ARG NEXT_PUBLIC_APP_NAME=${NEXT_PUBLIC_APP_NAME}
ARG NEXT_PUBLIC_WEB_URL=${NEXT_PUBLIC_WEB_URL}

WORKDIR /app

COPY package*.json ./
RUN npm ci --quiet

COPY . .

RUN npm run build
